@startuml Learning Management System - User Management Use Cases

title User Management Use Cases

actor User as u
actor Admin as a
actor System as s

package "User Authentication & Profile" {
    usecase "Register Account" as UC1
    usecase "Login" as UC2
    usecase "Logout" as UC3
    usecase "View Profile" as UC4
    usecase "Update Profile" as UC5
    usecase "Change Password" as UC6
    usecase "Forgot Password" as UC7
    usecase "Reset Password" as UC8
    usecase "Upload Avatar" as UC9
}

package "Admin Management" {
    usecase "Request Admin Access" as UC10
    usecase "View Admin Requests" as UC11
    usecase "Review Admin Request" as UC12
    usecase "Make User Admin" as UC13
    usecase "View My Admin Request" as UC14
}

' User connections
u --> UC1 : Register with email, password, fullName
u --> UC2 : Login with credentials
u --> UC3 : Logout from system
u --> UC4 : View own profile
u --> UC5 : Update fullName and avatar
u --> UC6 : Change password with old/new password
u --> UC7 : Request password reset via email
u --> UC8 : Reset password with token
u --> UC9 : Upload profile picture
u --> UC10 : Submit admin request with reason/experience
u --> UC14 : Check admin request status

' Admin connections
a --> UC11 : View all pending admin requests
a --> UC12 : Approve/Reject admin requests
a --> UC13 : Directly promote user to admin

' System connections
s --> UC7 : Send reset email
s --> UC8 : Validate reset token

UC1 .> UC9 : includes
UC5 .> UC9 : includes
UC7 .> UC8 : extends

note right of UC1
  Creates user with default avatar
  Generates JWT token
  Sets httpOnly cookie
end note

note right of UC10
  Prevents duplicate requests
  Requires reason and experience
end note

@enduml

@startuml Learning Management System - Course Management Use Cases

title Course Management Use Cases

actor Student as s
actor Admin as a
actor Subscriber as sub

package "Course Browsing" {
    usecase "View All Courses" as UC1
    usecase "View Course Details" as UC2
    usecase "View Course Lectures" as UC3
}

package "Course Management (Admin)" {
    usecase "Create Course" as UC4
    usecase "Update Course" as UC5
    usecase "Delete Course" as UC6
    usecase "Upload Course Thumbnail" as UC7
    usecase "Add Lecture to Course" as UC8
    usecase "Update Lecture" as UC9
    usecase "Delete Lecture" as UC10
    usecase "Upload Lecture Video" as UC11
}

' Student connections
s --> UC1 : Browse available courses (no auth required)
s --> UC2 : View course information

' Subscriber connections
sub --> UC1 : Browse available courses
sub --> UC2 : View course information  
sub --> UC3 : Access course lectures (requires active subscription)

' Admin connections
a --> UC1 : Browse all courses
a --> UC2 : View course details
a --> UC3 : Access all course lectures
a --> UC4 : Create new course with title, description, category
a --> UC5 : Update course information
a --> UC6 : Delete course and cleanup files
a --> UC7 : Upload/update course thumbnail
a --> UC8 : Add new lecture to course
a --> UC9 : Update lecture content
a --> UC10 : Delete lecture and video
a --> UC11 : Upload lecture video files

UC4 .> UC7 : includes
UC5 .> UC7 : includes
UC8 .> UC11 : includes
UC9 .> UC11 : includes

note right of UC1
  Returns courses without lectures
  No authentication required
end note

note right of UC3
  Requires active subscription
  Admin bypass for all lectures
end note

note right of UC4
  Creates course with dummy thumbnail
  Updates thumbnail if file provided
end note

@enduml

@startuml Learning Management System - Payment & Subscription Use Cases

title Payment & Subscription Use Cases

actor User as u
actor Admin as a
actor Razorpay as r

package "Subscription Management" {
    usecase "Get Razorpay API Key" as UC1
    usecase "Buy Subscription" as UC2
    usecase "Verify Payment" as UC3
    usecase "Cancel Subscription" as UC4
    usecase "Process Refund" as UC5
}

package "Payment Analytics" {
    usecase "View All Payments" as UC6
    usecase "View Monthly Sales" as UC7
    usecase "View Payment Statistics" as UC8
}

package "User Statistics" {
    usecase "View User Stats" as UC9
    usecase "View Subscriber Count" as UC10
}

' User connections
u --> UC1 : Get payment gateway key
u --> UC2 : Create subscription (monthly for 12 months)
u --> UC3 : Verify payment signature
u --> UC4 : Cancel active subscription
u --> UC5 : Request refund within 14 days

' Admin connections
a --> UC6 : View all payment records
a --> UC7 : View monthly sales data
a --> UC8 : Analyze payment statistics
a --> UC9 : View total user count
a --> UC10 : View active subscriber count

' Razorpay connections
r --> UC2 : Process subscription creation
r --> UC3 : Validate payment signature
r --> UC4 : Handle subscription cancellation
r --> UC5 : Process refund requests

UC2 .> UC3 : extends
UC4 .> UC5 : includes
UC6 .> UC7 : includes
UC6 .> UC8 : includes
UC9 .> UC10 : includes

note right of UC2
  Prevents admin from buying subscription
  Prevents duplicate active subscriptions
  Creates 12-month recurring plan
end note

note right of UC5
  Only within 14-day refund period
  Deletes payment record on refund
end note

@enduml

@startuml Learning Management System - System Administration Use Cases

title System Administration Use Cases

actor Admin as a
actor User as u
actor System as s

package "Contact & Support" {
    usecase "Contact Us" as UC1
    usecase "Send Contact Email" as UC2
}

package "User Analytics" {
    usecase "View User Statistics" as UC3
    usecase "View Subscription Analytics" as UC4
}

package "System Monitoring" {
    usecase "Debug Authentication" as UC5
    usecase "Debug Payment Auth" as UC6
    usecase "Monitor System Health" as UC7
}

' User connections
u --> UC1 : Submit contact form with name, email, message

' Admin connections
a --> UC3 : View total registered users
a --> UC4 : View active subscribers count
a --> UC5 : Check authentication cookies/tokens
a --> UC6 : Verify payment authentication
a --> UC7 : Monitor system status

' System connections
s --> UC2 : Send formatted email to admin
s --> UC7 : Log system events and errors

UC1 .> UC2 : includes
UC3 .> UC4 : includes

note right of UC1
  Sends HTML formatted email
  Includes user contact details
end note

note right of UC5
  Debug endpoint for auth issues
  Shows cookie and header info
end note

@enduml

@startuml Learning Management System - Overall System Architecture

title Learning Management System - Overall Use Case Overview

actor Guest as g
actor Student as s
actor Subscriber as sub
actor Admin as a
actor PaymentGateway as pg
actor EmailService as es

package "Public Access" {
    usecase "Browse Courses" as UC1
    usecase "Contact Support" as UC2
}

package "User Management" {
    usecase "User Registration" as UC3
    usecase "User Authentication" as UC4
    usecase "Profile Management" as UC5
    usecase "Admin Request System" as UC6
}

package "Course Management" {
    usecase "Course CRUD Operations" as UC7
    usecase "Lecture Management" as UC8
    usecase "Content Access Control" as UC9
}

package "Payment System" {
    usecase "Subscription Management" as UC10
    usecase "Payment Processing" as UC11
    usecase "Refund Management" as UC12
}

package "Administration" {
    usecase "User Administration" as UC13
    usecase "Analytics & Reporting" as UC14
    usecase "System Monitoring" as UC15
}

' Guest connections
g --> UC1 : View course catalog
g --> UC2 : Submit contact form

' Student connections
s --> UC3 : Register account
s --> UC4 : Login/Logout
s --> UC5 : Manage profile
s --> UC1 : Browse courses
s --> UC10 : Purchase subscription

' Subscriber connections
sub --> UC1 : Browse courses
sub --> UC9 : Access course content
sub --> UC10 : Manage subscription
sub --> UC12 : Request refunds

' Admin connections
a --> UC6 : Manage admin requests
a --> UC7 : Create/Update/Delete courses
a --> UC8 : Manage lectures
a --> UC13 : Promote users to admin
a --> UC14 : View analytics
a --> UC15 : Monitor system

' External services
pg --> UC11 : Process payments
es --> UC2 : Send contact emails
es --> UC4 : Send password reset emails

UC4 .> UC5 : extends
UC7 .> UC8 : includes
UC10 .> UC11 : includes
UC10 .> UC12 : extends
UC13 .> UC6 : includes

note top of UC9
  Access control based on:
  - User subscription status
  - Admin privileges
  - Authentication state
end note

note right of UC11
  Integrates with Razorpay
  Handles subscription verification
  Manages payment signatures
end note

@enduml
